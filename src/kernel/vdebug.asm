; =====================================================================================================================
; === KasmOS (c)2025+ Laurent Menten (laurent.menten@gmail.com) === GNU Lesser General Public License v3.0 (LGPLv3) ===
; =====================================================================================================================

    cpu     x64
    bits    64

; =====================================================================================================================
; = 
; =====================================================================================================================

FUNCTION vdebug_write_char
    out 0xE9, al
    ret

; =====================================================================================================================
; = 
; =====================================================================================================================

FUNCTION vdebug_write_string
    pushf
    push    rax

    cld

 .loop:
    lodsb
    test    al, al
    jz      .return

    call    vdebug_write_char
    jmp     .loop

.return:
    pop     rax
    popf
    ret
